<!DOCTYPE HTML>
<!--
	Future Imperfect by HTML5 UP
	html5up.net | @n33co
	Free for personal and commercial use under the CCA 3.0 license (html5up.net/license)
-->
<html>
  <head>
  <title>Stuart James' Journal</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!--[if lte IE 8]><script src="js/ie/html5shiv.js"></script><![endif]-->
  <link rel="stylesheet" href="/css/main.css">
  <!--[if lte IE 9]><link rel="stylesheet" href="assets/css/ie9.css" /><![endif]-->
  <!--[if lte IE 8]><link rel="stylesheet" href="assets/css/ie8.css" /><![endif]-->
</head>

	<body>

		<!-- Wrapper -->
			<div id="wrapper">

				<!-- Header -->
<header id="header">
  <h1><a href="http://stuart-james.net">Stuart James' Journal</a></h1>
	<nav class="links">
    <!--
    <ul>
      <li><a href="#">Lorem</a></li>
			<li><a href="#">Ipsum</a></li>
			<li><a href="#">Feugiat</a></li>
			<li><a href="#">Tempus</a></li>
			<li><a href="#">Adipiscing</a></li>
		</ul>
  -->
	</nav>
	<nav class="main">
    <ul>
                <!--
								<li class="search">
									<a class="fa-search" href="#search">Search</a>
									<form id="search" method="get" action="#">
										<input type="text" name="query" placeholder="Search" />
									</form>
								</li>
              -->
		  <li class="menu">
		  	<a class="fa-bars" href="#menu">Menu</a>
			</li>
		</ul>
	</nav>
</header>

<!-- Menu -->
<section id="menu">
  <!-- Search -->
  <!--
  <section>
	  <form class="search" method="get" action="#">
	    <input type="text" name="query" placeholder="Search" />
		</form>
	</section>
  -->
	<!-- Links -->
	<section>
	  <ul class="links">
	    <li>
		    <a href="/acknowledgement">
				  <h3>Acknowledgement</h3>
				  <p>Acknowledgement</p>
				</a>
			</li>
    </ul>
	</section>
	<!-- Actions -->
  <!--
  <section>
	  <ul class="actions vertical">
	    <li><a href="#" class="button big fit">Log In</a></li>
    </ul>
  </section>
  -->
</section>

				<!-- Main -->
					<div id="main">

						<!-- Post -->
			      
  <article class="post">
    <header>
      <div class="title">
        <h2><a href="/2012/08/05/olympics-2012-table-tennis-round-4-my-olympic-experience.html">Olympics 2012 Table Tennis Round 4–My Olympic Experience!</a></h2>
        <!-- <p>Lorem ipsum dolor amet nullam consequat etiam feugiat</p> -->
      </div>
      <div class="meta">
        <time class="published" datetime="2012-08-05">August 05, 2012</time>
        
        <!--
        <a href="#" class="author"><span class="name">Jane Doe</span><img src="images/avatar.jpg" alt="" /></a>
        -->
      </div>
    </header>
    
    <p align="left">Sadly this pushed my lens to the limits and have been a little lazy in the post processing just cropped a few but enjoy…</p> <p align="center"><a href="http://stuartjames.info/Journal/Data/Sites/5/media/wlw/dsc_0022.jpg"><img style="display: inline" title="DSC_0022" alt="DSC_0022" src="http://stuartjames.info/Data/Sites/5/media/wlw/dsc_0022_thumb.jpg" width="640" height="425"></a></p> <p align="center">Getting the table ready</p> <p align="center"></p> <p align="center"><a href="http://stuartjames.info/Journal/Data/Sites/5/media/wlw/dsc_0025.jpg"><img style="display: block; float: none; margin-left: auto; margin-right: auto" title="DSC_0025" alt="DSC_0025" src="http://stuartjames.info/Data/Sites/5/media/wlw/dsc_0025_thumb.jpg" width="640" height="269"></a></p> <p align="center">So this is how you play</p> <p align="center"><a href="http://stuartjames.info/Journal/Data/Sites/5/media/wlw/dsc_0029.jpg"><img style="display: inline" title="DSC_0029" alt="DSC_0029" src="http://stuartjames.info/Data/Sites/5/media/wlw/dsc_0029_thumb.jpg" width="458" height="480"></a></p> <p align="center">And down…</p> <p align="center"><a href="http://stuartjames.info/Journal/Data/Sites/5/media/wlw/dsc_0036.jpg"><img style="display: inline" title="DSC_0036" alt="DSC_0036" src="http://stuartjames.info/Data/Sites/5/media/wlw/dsc_0036_thumb.jpg" width="640" height="251"></a></p> <p align="center">I can get it</p> <p align="center">&nbsp;</p> <p align="center"><a href="http://stuartjames.info/Journal/Data/Sites/5/media/wlw/dsc_0043.jpg"><img style="display: inline" title="DSC_0043" alt="DSC_0043" src="http://stuartjames.info/Data/Sites/5/media/wlw/dsc_0043_thumb.jpg" width="640" height="425"></a></p> <p align="center">The Stadium</p> <p align="center"><a href="http://stuartjames.info/Journal/Data/Sites/5/media/wlw/dsc_0046.jpg"><img style="display: inline" title="DSC_0046" alt="DSC_0046" src="http://stuartjames.info/Data/Sites/5/media/wlw/dsc_0046_thumb.jpg" width="640" height="425"></a></p> <p align="center">Lots of flags</p> <p align="center">&nbsp;</p> <p align="center"></p> <p align="center"><a href="http://stuartjames.info/Journal/Data/Sites/5/media/wlw/dsc_0065.jpg"><img style="display: inline" title="DSC_0065" alt="DSC_0065" src="http://stuartjames.info/Data/Sites/5/media/wlw/dsc_0065_thumb.jpg" width="640" height="318"></a></p> <p align="center">Keep your eye on the ball</p> <p align="center">&nbsp;</p> <p align="center"><a href="http://stuartjames.info/Journal/Data/Sites/5/media/wlw/dsc_0066.jpg"><img style="display: inline" title="DSC_0066" alt="DSC_0066" src="http://stuartjames.info/Data/Sites/5/media/wlw/dsc_0066_thumb.jpg" width="640" height="225"></a></p> <p align="center">Uh oh</p> <p align="center"><a href="http://stuartjames.info/Journal/Data/Sites/5/media/wlw/dsc_0067.jpg"><img style="display: inline" title="DSC_0067" alt="DSC_0067" src="http://stuartjames.info/Data/Sites/5/media/wlw/dsc_0067_thumb.jpg" width="640" height="242"></a></p> <p align="center"></p> <p align="center">I love victory poses</p> <p align="center"><a href="http://stuartjames.info/Journal/Data/Sites/5/media/wlw/dsc_0068.jpg"><img style="display: inline" title="DSC_0068" alt="DSC_0068" src="http://stuartjames.info/Data/Sites/5/media/wlw/dsc_0068_thumb.jpg" width="479" height="480"></a></p> <p align="center">“If I balance this very carefully it will stay on my racket see”</p> <p align="center"><a href="http://stuartjames.info/Journal/Data/Sites/5/media/wlw/dsc_0082.jpg"><img style="display: inline" title="DSC_0082" alt="DSC_0082" src="http://stuartjames.info/Data/Sites/5/media/wlw/dsc_0082_thumb.jpg" width="390" height="480"></a></p> <p align="center">And another victory pose!</p><br /><a href='http://stuartjames.info/Journal/olympics-2012-table-tennis-round-4–my-olympic-experience.aspx'>Stuart James</a>&nbsp;&nbsp;<a href='http://stuartjames.info/Journal/olympics-2012-table-tennis-round-4–my-olympic-experience.aspx'>...</a>

    <footer>
      <ul class="actions">
        <li><a href="/2012/08/05/olympics-2012-table-tennis-round-4-my-olympic-experience.html" class="button big">Continue Reading</a></li>
      </ul>
      <ul class="stats">
        
        <!--
        <li><a href="#">General</a></li>
        <li><a href="#" class="icon fa-heart">28</a></li>
        <li><a href="#" class="icon fa-comment">128</a></li>
        -->
      </ul>
    </footer>
  </article>

  <article class="post">
    <header>
      <div class="title">
        <h2><a href="/2012/08/02/boost-serialization-fast-and-easy-serialization-of-objects-for-c++-to-xml-text-or-binary.html">Boost Serialization fast and easy Serialization of objects for C++ to XML,Text or Binary</a></h2>
        <!-- <p>Lorem ipsum dolor amet nullam consequat etiam feugiat</p> -->
      </div>
      <div class="meta">
        <time class="published" datetime="2012-08-02">August 02, 2012</time>
        
        <!--
        <a href="#" class="author"><span class="name">Jane Doe</span><img src="images/avatar.jpg" alt="" /></a>
        -->
      </div>
    </header>
    
    <p>While coding I always try to learn new ways of writing old things. There are many many libraries out there for C++ all work in different ways, but the library I fell in love with is Boost. Ignoring the massive extension to the STL basic classes it bundles up matrix, graph, system functionality. But what beats all of that mainly because I write it to often is the ever allusive save and load functionality you have to write for all classes. Serialization is one of the things I really miss from my old C# writing days. So here goes a few examples of how to make serialization work!</p> <p>In C++ there is no reflector so sadly we have to tell the compiler what to save. So an example class</p> <p>&nbsp;</p> <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:9D7513F9-C04C-4721-824A-2B34F0212519:99a7a63d-182a-466e-8522-7af8665618a9" class="wlWriterEditableSmartContent"><pre style=" width: 395px; height: 184px;background-color:White;overflow: visible;"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #008080;">1</span> <span style="color: #0000FF;">class</span><span style="color: #000000;"> NodeDescriptor{
</span><span style="color: #008080;">2</span> <span style="color: #000000;"></span><span style="color: #0000FF;">public</span><span style="color: #000000;">:
</span><span style="color: #008080;">3</span> <span style="color: #000000;">    NodeDescriptor() {} ;
</span><span style="color: #008080;">4</span> <span style="color: #000000;">    NodeDescriptor(</span><span style="color: #0000FF;">int</span><span style="color: #000000;"> offset):
</span><span style="color: #008080;">5</span> <span style="color: #000000;">        Offset(offset){} ;
</span><span style="color: #008080;">6</span> <span style="color: #000000;">    </span><span style="color: #000000;">~</span><span style="color: #000000;">NodeDescriptor() {} ;
</span><span style="color: #008080;">7</span> <span style="color: #000000;">    </span><span style="color: #0000FF;">int</span><span style="color: #000000;"> Offset;
</span><span style="color: #008080;">8</span> <span style="color: #000000;"></span><span style="color: #0000FF;">private</span><span style="color: #000000;">:
</span><span style="color: #008080;">9</span> <span style="color: #000000;">};</span></div></pre><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>Very very basic, one public variable this is an internal of another object so is reasonable to allow a public property style access. So what we want to do is to do is allow Boost access to save out the variables.</p>
<p>&nbsp;</p>
<div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:9D7513F9-C04C-4721-824A-2B34F0212519:60c870df-d3f2-41ff-8077-5ec22220ee0f" class="wlWriterEditableSmartContent"><pre style=" width: 742px; height: 308px;background-color:White;overflow: visible;"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #008080;"> 1</span> <span style="color: #0000FF;">class</span><span style="color: #000000;"> NodeDescriptor{
</span><span style="color: #008080;"> 2</span> <span style="color: #000000;"></span><span style="color: #0000FF;">public</span><span style="color: #000000;">:
</span><span style="color: #008080;"> 3</span> <span style="color: #000000;">    NodeDescriptor() {} ;
</span><span style="color: #008080;"> 4</span> <span style="color: #000000;">    NodeDescriptor(</span><span style="color: #0000FF;">int</span><span style="color: #000000;"> offset):
</span><span style="color: #008080;"> 5</span> <span style="color: #000000;">        Offset(offset){} ;
</span><span style="color: #008080;"> 6</span> <span style="color: #000000;">    </span><span style="color: #000000;">~</span><span style="color: #000000;">NodeDescriptor() {} ;
</span><span style="color: #008080;"> 7</span> <span style="color: #000000;">    </span><span style="color: #0000FF;">int</span><span style="color: #000000;"> Offset;
</span><span style="color: #008080;"> 8</span> <span style="color: #000000;"></span><span style="color: #0000FF;">private</span><span style="color: #000000;">:
</span><span style="color: #008080;"> 9</span> <span style="color: #000000;">    </span><span style="color: #008000;">//</span><span style="color: #008000;"> Serialization Settings</span><span style="color: #008000;">
</span><span style="color: #008080;">10</span> <span style="color: #008000;"></span><span style="color: #000000;">    friend </span><span style="color: #0000FF;">class</span><span style="color: #000000;"> boost::serialization::access;
</span><span style="color: #008080;">11</span> <span style="color: #000000;">    friend std::ostream </span><span style="color: #000000;">&amp;</span><span style="color: #000000;"> </span><span style="color: #0000FF;">operator</span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;">(std::ostream </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">os, </span><span style="color: #0000FF;">const</span><span style="color: #000000;"> MotionGraphDesc </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">mgd);
</span><span style="color: #008080;">12</span> <span style="color: #000000;">    template</span><span style="color: #000000;">&lt;</span><span style="color: #0000FF;">class</span><span style="color: #000000;"> Archive</span><span style="color: #000000;">&gt;</span><span style="color: #000000;">
</span><span style="color: #008080;">13</span> <span style="color: #000000;">    </span><span style="color: #0000FF;">void</span><span style="color: #000000;"> serialize(Archive </span><span style="color: #000000;">&amp;</span><span style="color: #000000;"> ar, </span><span style="color: #0000FF;">const</span><span style="color: #000000;"> unsigned </span><span style="color: #0000FF;">int</span><span style="color: #000000;"> </span><span style="color: #008000;">/*</span><span style="color: #008000;"> file_version </span><span style="color: #008000;">*/</span><span style="color: #000000;">)
</span><span style="color: #008080;">14</span> <span style="color: #000000;">    {
</span><span style="color: #008080;">15</span> <span style="color: #000000;">            ar </span><span style="color: #000000;">&amp;</span><span style="color: #000000;"> BOOST_SERIALIZATION_NVP(Offset);
</span><span style="color: #008080;">16</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">17</span> <span style="color: #000000;">};</span></div></pre><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>So what we have added is allowing boost access via a friend operator. Then adding a class for serialize the data, unfortunately you have to define the data of which there is many ways todo, above is an example of the xml way, what this does is create a xml tag called Offset where it stores the value of Offset. Alternatively say we had a private member _offset, it wouldn’t be visually nice to read the xml so we can customise the name of the tag.</p>
<div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:9D7513F9-C04C-4721-824A-2B34F0212519:3744339b-1034-443c-82d5-04bbace4a8ef" class="wlWriterEditableSmartContent"><pre style=" width: 742px; height: 83px;background-color:White;overflow: auto;"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #008080;">1</span> <span style="color: #0000FF;">void</span><span style="color: #000000;"> serialize(Archive </span><span style="color: #000000;">&amp;</span><span style="color: #000000;"> ar, </span><span style="color: #0000FF;">const</span><span style="color: #000000;"> unsigned </span><span style="color: #0000FF;">int</span><span style="color: #000000;"> </span><span style="color: #008000;">/*</span><span style="color: #008000;"> file_version </span><span style="color: #008000;">*/</span><span style="color: #000000;">)
</span><span style="color: #008080;">2</span> <span style="color: #000000;">{
</span><span style="color: #008080;">3</span> <span style="color: #000000;">    ar    </span><span style="color: #000000;">&amp;</span><span style="color: #000000;">  boost::serialization::make_nvp(</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">Offset</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">,_offset);
</span><span style="color: #008080;">4</span> <span style="color: #000000;">}</span></div></pre><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>This is actually what the BOOST_SERIALIZATION_NVP macro roles out into but BOOST_SERIALIZATION_NVP is slightly more convenient in a large amount of cases. So now the question is how do we save? Well if you add in a couple of methods to your class description for Load, Save you get something like this, to note I have defined an enum that will come in to play with the read write functions.</p>
<div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:9D7513F9-C04C-4721-824A-2B34F0212519:9dd766a6-4d6e-4177-8344-a7a8e08c8023" class="wlWriterEditableSmartContent"><pre style=" width: 843px; height: 271px;background-color:White;overflow: auto;"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #008080;"> 1</span> <span style="color: #0000FF;">bool</span><span style="color: #000000;"> NodeDescriptor::Load(</span><span style="color: #0000FF;">const</span><span style="color: #000000;"> </span><span style="color: #0000FF;">char</span><span style="color: #000000;">*</span><span style="color: #000000;"> path,SerializeAsType t){
</span><span style="color: #008080;"> 2</span> <span style="color: #000000;">    std::ifstream f(path);
</span><span style="color: #008080;"> 3</span> <span style="color: #000000;">    </span><span style="color: #0000FF;">if</span><span style="color: #000000;"> (f.is_open()){
</span><span style="color: #008080;"> 4</span> <span style="color: #000000;">        Read(f,t);
</span><span style="color: #008080;"> 5</span> <span style="color: #000000;">    }</span><span style="color: #0000FF;">else</span><span style="color: #000000;">
</span><span style="color: #008080;"> 6</span> <span style="color: #000000;">        </span><span style="color: #0000FF;">return</span><span style="color: #000000;"> </span><span style="color: #0000FF;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 7</span> <span style="color: #000000;">}
</span><span style="color: #008080;"> 8</span> <span style="color: #000000;">
</span><span style="color: #008080;"> 9</span> <span style="color: #000000;"></span><span style="color: #0000FF;">bool</span><span style="color: #000000;"> NodeDescriptor::Save(</span><span style="color: #0000FF;">const</span><span style="color: #000000;"> </span><span style="color: #0000FF;">char</span><span style="color: #000000;">*</span><span style="color: #000000;"> path,SerializeAsType t){
</span><span style="color: #008080;">10</span> <span style="color: #000000;">    std::ofstream f(path);
</span><span style="color: #008080;">11</span> <span style="color: #000000;">    </span><span style="color: #0000FF;">if</span><span style="color: #000000;"> (f.is_open()){
</span><span style="color: #008080;">12</span> <span style="color: #000000;">        Write(f,t);
</span><span style="color: #008080;">13</span> <span style="color: #000000;">    }</span><span style="color: #0000FF;">else</span><span style="color: #000000;">
</span><span style="color: #008080;">14</span> <span style="color: #000000;">        </span><span style="color: #0000FF;">return</span><span style="color: #000000;"> </span><span style="color: #0000FF;">false</span><span style="color: #000000;">;
</span><span style="color: #008080;">15</span> <span style="color: #000000;">}</span></div></pre><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>Now we define the read write:</p>
<div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:9D7513F9-C04C-4721-824A-2B34F0212519:0190187e-eda3-4ee6-b31c-4f0482a1ab85" class="wlWriterEditableSmartContent"><pre style=" width: 843px; height: 846px;background-color:White;overflow: visible;"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #008080;"> 1</span> <span style="color: #0000FF;">bool</span><span style="color: #000000;"> NodeDescriptor::Read(std::istream</span><span style="color: #000000;">&amp;</span><span style="color: #000000;"> str,SerializeAsType t){
</span><span style="color: #008080;"> 2</span> <span style="color: #000000;">    </span><span style="color: #0000FF;">switch</span><span style="color: #000000;">(t){
</span><span style="color: #008080;"> 3</span> <span style="color: #000000;">    </span><span style="color: #0000FF;">case</span><span style="color: #000000;"> XmlArc:
</span><span style="color: #008080;"> 4</span> <span style="color: #000000;">        {
</span><span style="color: #008080;"> 5</span> <span style="color: #000000;">            boost::archive::xml_iarchive ia(str);
</span><span style="color: #008080;"> 6</span> <span style="color: #000000;">            ia </span><span style="color: #000000;">&gt;&gt;</span><span style="color: #000000;"> boost::serialization::make_nvp(</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">NodeDescriptor</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">,(</span><span style="color: #000000;">*</span><span style="color: #0000FF;">this</span><span style="color: #000000;">));
</span><span style="color: #008080;"> 7</span> <span style="color: #000000;">        }
</span><span style="color: #008080;"> 8</span> <span style="color: #000000;">        </span><span style="color: #0000FF;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;"> 9</span> <span style="color: #000000;">    </span><span style="color: #0000FF;">case</span><span style="color: #000000;"> TextArc:
</span><span style="color: #008080;">10</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">11</span> <span style="color: #000000;">            boost::archive::text_iarchive ia(str);
</span><span style="color: #008080;">12</span> <span style="color: #000000;">            ia </span><span style="color: #000000;">&gt;&gt;</span><span style="color: #000000;"> </span><span style="color: #000000;">*</span><span style="color: #0000FF;">this</span><span style="color: #000000;">;
</span><span style="color: #008080;">13</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">14</span> <span style="color: #000000;">        </span><span style="color: #0000FF;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">15</span> <span style="color: #000000;">    </span><span style="color: #0000FF;">case</span><span style="color: #000000;"> BinaryArc:
</span><span style="color: #008080;">16</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">17</span> <span style="color: #000000;">            boost::archive::binary_iarchive ia(str);
</span><span style="color: #008080;">18</span> <span style="color: #000000;">            ia </span><span style="color: #000000;">&gt;&gt;</span><span style="color: #000000;"> </span><span style="color: #000000;">*</span><span style="color: #0000FF;">this</span><span style="color: #000000;">;
</span><span style="color: #008080;">19</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">20</span> <span style="color: #000000;">        </span><span style="color: #0000FF;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">21</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">22</span> <span style="color: #000000;">    </span><span style="color: #0000FF;">return</span><span style="color: #000000;"> </span><span style="color: #0000FF;">true</span><span style="color: #000000;">;
</span><span style="color: #008080;">23</span> <span style="color: #000000;">}
</span><span style="color: #008080;">24</span> <span style="color: #000000;">
</span><span style="color: #008080;">25</span> <span style="color: #000000;"></span><span style="color: #0000FF;">bool</span><span style="color: #000000;"> NodeDescriptor::Write(std::ostream</span><span style="color: #000000;">&amp;</span><span style="color: #000000;"> str,SerializeAsType t){
</span><span style="color: #008080;">26</span> <span style="color: #000000;">    </span><span style="color: #0000FF;">switch</span><span style="color: #000000;">(t){
</span><span style="color: #008080;">27</span> <span style="color: #000000;">    </span><span style="color: #0000FF;">case</span><span style="color: #000000;"> XmlArc:
</span><span style="color: #008080;">28</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">29</span> <span style="color: #000000;">            boost::archive::xml_oarchive oa(str);
</span><span style="color: #008080;">30</span> <span style="color: #000000;">            oa </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> boost::serialization::make_nvp(</span><span style="color: #800000;">&quot;</span><span style="color: #800000;">NodeDescriptor</span><span style="color: #800000;">&quot;</span><span style="color: #000000;">,(</span><span style="color: #000000;">*</span><span style="color: #0000FF;">this</span><span style="color: #000000;">));
</span><span style="color: #008080;">31</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">32</span> <span style="color: #000000;">        </span><span style="color: #0000FF;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">33</span> <span style="color: #000000;">    </span><span style="color: #0000FF;">case</span><span style="color: #000000;"> TextArc:
</span><span style="color: #008080;">34</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">35</span> <span style="color: #000000;">            boost::archive::text_oarchive oa(str);
</span><span style="color: #008080;">36</span> <span style="color: #000000;">            oa </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> (</span><span style="color: #000000;">*</span><span style="color: #0000FF;">this</span><span style="color: #000000;">);
</span><span style="color: #008080;">37</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">38</span> <span style="color: #000000;">        </span><span style="color: #0000FF;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">39</span> <span style="color: #000000;">    </span><span style="color: #0000FF;">case</span><span style="color: #000000;"> BinaryArc:
</span><span style="color: #008080;">40</span> <span style="color: #000000;">        {
</span><span style="color: #008080;">41</span> <span style="color: #000000;">            boost::archive::binary_oarchive oa(str);
</span><span style="color: #008080;">42</span> <span style="color: #000000;">            oa </span><span style="color: #000000;">&lt;&lt;</span><span style="color: #000000;"> (</span><span style="color: #000000;">*</span><span style="color: #0000FF;">this</span><span style="color: #000000;">);
</span><span style="color: #008080;">43</span> <span style="color: #000000;">        }
</span><span style="color: #008080;">44</span> <span style="color: #000000;">        </span><span style="color: #0000FF;">break</span><span style="color: #000000;">;
</span><span style="color: #008080;">45</span> <span style="color: #000000;">    }
</span><span style="color: #008080;">46</span> <span style="color: #000000;">    </span><span style="color: #0000FF;">return</span><span style="color: #000000;"> </span><span style="color: #0000FF;">true</span><span style="color: #000000;">;
</span><span style="color: #008080;">47</span> <span style="color: #000000;">}</span></div></pre><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>How easy is that? Most of the space is taken up by making it more compatible allowing the save and load of XML, Text and Binary archives. One thing to note thought is that this is for the purpose of serialization not really a property config file. The other thing to consider is this is a lazy coder solution, it isn’t fast so don't create massive xml files or they will take a long time to read in and out!</p><br /><a href='http://stuartjames.info/Journal/boost-serialization-fast-and-easy-serialization-of-objects-for-c-to-xmltext-or-binary.aspx'>Stuart James</a>&nbsp;&nbsp;<a href='http://stuartjames.info/Journal/boost-serialization-fast-and-easy-serialization-of-objects-for-c-to-xmltext-or-binary.aspx'>...</a>

    <footer>
      <ul class="actions">
        <li><a href="/2012/08/02/boost-serialization-fast-and-easy-serialization-of-objects-for-c++-to-xml-text-or-binary.html" class="button big">Continue Reading</a></li>
      </ul>
      <ul class="stats">
        
        <!--
        <li><a href="#">General</a></li>
        <li><a href="#" class="icon fa-heart">28</a></li>
        <li><a href="#" class="icon fa-comment">128</a></li>
        -->
      </ul>
    </footer>
  </article>

  <article class="post">
    <header>
      <div class="title">
        <h2><a href="/2012/07/11/olympics-2012-tickets-have-arrived-in-two-batches-(dont-ask-why).html">Olympics 2012 tickets have arrived in two batches (dont ask why)</a></h2>
        <!-- <p>Lorem ipsum dolor amet nullam consequat etiam feugiat</p> -->
      </div>
      <div class="meta">
        <time class="published" datetime="2012-07-11">July 11, 2012</time>
        
        <!--
        <a href="#" class="author"><span class="name">Jane Doe</span><img src="images/avatar.jpg" alt="" /></a>
        -->
      </div>
    </header>
    
    <p><a href="http://stuartjames.info/Journal/Data/Sites/5/media/wlw/olympic-tickets-2012.jpg"><img style="display: inline" title="olympic-tickets-2012" alt="olympic-tickets-2012" src="http://stuartjames.info/Data/Sites/5/media/wlw/olympic-tickets-2012_thumb.jpg" width="640" height="429"></a></p><br /><a href='http://stuartjames.info/Journal/olympics-2012-tickets-have-arrived-in-two-batches-dont-ask-why.aspx'>Stuart James</a>&nbsp;&nbsp;<a href='http://stuartjames.info/Journal/olympics-2012-tickets-have-arrived-in-two-batches-dont-ask-why.aspx'>...</a>

    <footer>
      <ul class="actions">
        <li><a href="/2012/07/11/olympics-2012-tickets-have-arrived-in-two-batches-(dont-ask-why).html" class="button big">Continue Reading</a></li>
      </ul>
      <ul class="stats">
        
        <!--
        <li><a href="#">General</a></li>
        <li><a href="#" class="icon fa-heart">28</a></li>
        <li><a href="#" class="icon fa-comment">128</a></li>
        -->
      </ul>
    </footer>
  </article>

  <article class="post">
    <header>
      <div class="title">
        <h2><a href="/2012/06/23/visual-studio-12-performance-analysis.html">Visual Studio 12 Performance Analysis</a></h2>
        <!-- <p>Lorem ipsum dolor amet nullam consequat etiam feugiat</p> -->
      </div>
      <div class="meta">
        <time class="published" datetime="2012-06-23">June 23, 2012</time>
        
        <!--
        <a href="#" class="author"><span class="name">Jane Doe</span><img src="images/avatar.jpg" alt="" /></a>
        -->
      </div>
    </header>
    
    <p>Since the Visual Studio 2012 RTM came out I have been experimenting with the different features. Now this may of existed in previous versions(although not as pretty), but this is quite a nice little tool for understanding where your code is being locked up. Sadly though in this case I wasn’t actually able to get any advantage without a big re-write.</p> <p><a href="http://stuartjames.info/Journal/Data/Sites/5/media/wlw/image_2.png"><img style="display: inline" title="image" alt="image" src="http://stuartjames.info/Data/Sites/5/media/wlw/image_thumb_2.png" width="640" height="419"></a></p> <p>So what do you get, some charts some nice percentage bars, and also the ability to dig down into your function and find where it really is going slow.</p> <p><a href="http://stuartjames.info/Journal/Data/Sites/5/media/wlw/image_3.png"><img style="display: inline" title="image" alt="image" src="http://stuartjames.info/Data/Sites/5/media/wlw/image_thumb_3.png" width="629" height="480"></a></p> <p>This is an example of a tree being searched through so there is little to be gained (or at least on first glance) to improve the performance. But is nice to know that abusing vectors is killing my code… maybe a note for next time I write something like this.</p><br /><a href='http://stuartjames.info/Journal/visual-studio-12-performance-analysis.aspx'>Stuart James</a>&nbsp;&nbsp;<a href='http://stuartjames.info/Journal/visual-studio-12-performance-analysis.aspx'>...</a>

    <footer>
      <ul class="actions">
        <li><a href="/2012/06/23/visual-studio-12-performance-analysis.html" class="button big">Continue Reading</a></li>
      </ul>
      <ul class="stats">
        
        <!--
        <li><a href="#">General</a></li>
        <li><a href="#" class="icon fa-heart">28</a></li>
        <li><a href="#" class="icon fa-comment">128</a></li>
        -->
      </ul>
    </footer>
  </article>

  <article class="post">
    <header>
      <div class="title">
        <h2><a href="/2012/06/19/google-user-interface-consistency-error.html">Google user interface consistency error</a></h2>
        <!-- <p>Lorem ipsum dolor amet nullam consequat etiam feugiat</p> -->
      </div>
      <div class="meta">
        <time class="published" datetime="2012-06-19">June 19, 2012</time>
        
        <!--
        <a href="#" class="author"><span class="name">Jane Doe</span><img src="images/avatar.jpg" alt="" /></a>
        -->
      </div>
    </header>
    
    <p>&nbsp;</p><a href="http://stuartjames.info/Journal/Data/Sites/5/media/wlw/google-listen-ui-fail.png"><img style="display: block; float: none; margin-left: auto; margin-right: auto" title="google-listen-ui-fail" alt="google-listen-ui-fail" src="http://stuartjames.info/Data/Sites/5/media/wlw/google-listen-ui-fail_thumb.png" width="409" height="480"></a> <p>&nbsp;</p> <p>Every so often you will hit a user interface that will break your user model. It isn’t often that mainstream publishers will do this so I was quite shocked on the Google Listen App for Android (2.3) in the add podcast option the add and cancel buttons are around the wrong way. Making me accidently click add instead of cancel. The worse part when these events occur you have to think, is that actually the wrong way? but after opening a few more apps I felt happy to say Google FAIL!</p><br /><a href='http://stuartjames.info/Journal/google-user-interface-consistency-error.aspx'>Stuart James</a>&nbsp;&nbsp;<a href='http://stuartjames.info/Journal/google-user-interface-consistency-error.aspx'>...</a>

    <footer>
      <ul class="actions">
        <li><a href="/2012/06/19/google-user-interface-consistency-error.html" class="button big">Continue Reading</a></li>
      </ul>
      <ul class="stats">
        
        <!--
        <li><a href="#">General</a></li>
        <li><a href="#" class="icon fa-heart">28</a></li>
        <li><a href="#" class="icon fa-comment">128</a></li>
        -->
      </ul>
    </footer>
  </article>


  					<ul class="actions pagination">
  					  
  	  				  <li><a href="/page11" class="button big previous">Previous Page</a></li>
  						
  							<li>12 / 17</li>
							
  						  <li><a href="/page13" class="button big next">Next Page</a></li>
  						
  					</ul>
					</div>

				<!-- Sidebar -->
					<section id="sidebar">

						<!-- Intro -->
						<section id="intro">
  
	<header>
    
    <h2>Stuart James' Journal</h2>
    
    <div style='float:left;'><a href="http://stuart-james.net" class="logo"><img src="/images/logo.jpg" alt="" /></a></div>
    <div style='float:left;'>
    <p>A simple little place for me to scribble down
	  my thoughts and help my terrible memory</p>
    </div>
    <div style='clear:left;'></div>
	  <hr />
	  <p>A little about me...</p>
		<p>I'm a <strong>Computer Vision</strong> and <strong>Machine learning</strong> researcher at <strong>UCL</strong>. Working in the VECG with
		Tim Weyrich. Previously from <strong>University of Surrey</strong>  where I completed a Post-Doc and PhD studies.</p>

	</header>
</section>


						<!-- Mini Posts -->
						<section>
  <div class="mini-posts">
    
      <article class="mini-post">
  	    <header>
  		    <h3><a href="/2016/04/14/moving-to-jekyll.html">Moving to Jekyll</a></h3>
		      <time class="published" datetime="2016-04-14">April 14, 2016</time>
						<!--<a href="#" class="author"><img src="/images/avatar.jpg" alt="" /></a>-->
			  </header>
        
          <a href="/2016/04/14/moving-to-jekyll.html" class="image"><img src="/images/blog/jekyll-logo.png" alt="" /></a>
        
		  </article>
									<!-- Mini Post -->
									  <!--
										<article class="mini-post">
											<header>
												<h3><a href="#">Vitae sed condimentum</a></h3>
												<time class="published" datetime="2015-10-20">October 20, 2015</time>
												<a href="#" class="author"><img src="/images/avatar.jpg" alt="" /></a>
											</header>
											<a href="#" class="image"><img src="/images/pic04.jpg" alt="" /></a>
										</article>
									-->
    
      <article class="mini-post">
  	    <header>
  		    <h3><a href="/tech/2014/10/20/why-i-am-a-resolution-junky.html">Why I am a resolution junky</a></h3>
		      <time class="published" datetime="2014-10-20">October 20, 2014</time>
						<!--<a href="#" class="author"><img src="/images/avatar.jpg" alt="" /></a>-->
			  </header>
        
          <a href="/tech/2014/10/20/why-i-am-a-resolution-junky.html" class="image"><img src="/images/blog/highrescoding.png" alt="" /></a>
        
		  </article>
									<!-- Mini Post -->
									  <!--
										<article class="mini-post">
											<header>
												<h3><a href="#">Vitae sed condimentum</a></h3>
												<time class="published" datetime="2015-10-20">October 20, 2015</time>
												<a href="#" class="author"><img src="/images/avatar.jpg" alt="" /></a>
											</header>
											<a href="#" class="image"><img src="/images/pic04.jpg" alt="" /></a>
										</article>
									-->
    
      <article class="mini-post">
  	    <header>
  		    <h3><a href="/tech/2014/09/26/new-toys-sept-14-part-1-of-2-benq-bl2710pt-27-wqhd.html">New Toys Sept’14 Part 1 of 2 – BenQ BL2710PT 27” WQHD</a></h3>
		      <time class="published" datetime="2014-09-26">September 26, 2014</time>
						<!--<a href="#" class="author"><img src="/images/avatar.jpg" alt="" /></a>-->
			  </header>
        
          <a href="/tech/2014/09/26/new-toys-sept-14-part-1-of-2-benq-bl2710pt-27-wqhd.html" class="image"><img src="/images/blog/train-rgb2.jpg" alt="" /></a>
        
		  </article>
									<!-- Mini Post -->
									  <!--
										<article class="mini-post">
											<header>
												<h3><a href="#">Vitae sed condimentum</a></h3>
												<time class="published" datetime="2015-10-20">October 20, 2015</time>
												<a href="#" class="author"><img src="/images/avatar.jpg" alt="" /></a>
											</header>
											<a href="#" class="image"><img src="/images/pic04.jpg" alt="" /></a>
										</article>
									-->
    
      <article class="mini-post">
  	    <header>
  		    <h3><a href="/2014/07/07/libsvm-linear-kernel-normalisation.html">libSVM linear kernel normalisation</a></h3>
		      <time class="published" datetime="2014-07-07">July 07, 2014</time>
						<!--<a href="#" class="author"><img src="/images/avatar.jpg" alt="" /></a>-->
			  </header>
        
          <a href="/2014/07/07/libsvm-linear-kernel-normalisation.html" class="image"><img src="/images/blog/fnsys-06-00059-g002.jpg" alt="" /></a>
        
		  </article>
									<!-- Mini Post -->
									  <!--
										<article class="mini-post">
											<header>
												<h3><a href="#">Vitae sed condimentum</a></h3>
												<time class="published" datetime="2015-10-20">October 20, 2015</time>
												<a href="#" class="author"><img src="/images/avatar.jpg" alt="" /></a>
											</header>
											<a href="#" class="image"><img src="/images/pic04.jpg" alt="" /></a>
										</article>
									-->
    
  </div>
</section>


						<!-- Posts List -->

						<!-- About 
					  <section class="blurb">
  <h2>About</h2>
	<p>Stuart James' journal, a simple little place for me to scribble down my thoughts and help my terrible memory</p>
	<ul class="actions">
	  <li><a href="/about" class="button">Learn More</a></li>
	</ul>
</section>

						-->
						<!-- Footer -->
						<section id="footer">
  <ul class="icons">
  	<li><a href="https://twitter.com/sttujames" class="fa-twitter"><span class="label">Twitter</span></a></li>
		<li><a href="https://github.com/sttu" class="fa-github"><span class="label">GitHub</span></a></li>
		<li><a href="/feed.xml" class="fa-rss"><span class="label">RSS</span></a></li>
		<li><a href="mailto:contact@stuart-james.com" class="fa-envelope"><span class="label">Email</span></a></li>
	</ul>
  <p class="copyright">Copyright &copy; 2015 </p>
</section>

					</section>
			</div>
		<!-- Scripts -->
		<script src="/js/jquery.min.js"></script>
<script src="/js/skel.min.js"></script>
<script src="/js/util.js"></script>
<!--[if lte IE 8]><script src="/assets/js/ie/respond.min.js"></script><![endif]-->
<script src="/js/main.js"></script>

	</body>
</html>
