<!DOCTYPE html>
<html>
  	<head>
  		<title>Stuart James' Journal</title>
  		<meta http-equiv="content-type" content="text/html; charset=utf-8" />
  		<meta name="description" content="" />
  		<meta name="keywords" content="" />
  		<!--[if lte IE 8]><script src="css/ie/html5shiv.js"></script><![endif]-->
  		<script src="/js/jquery.min.js"></script>
  		<script src="/js/jquery.poptrox.min.js"></script>
  		<script src="/js/skel.min.js"></script>
  		<script src="/js/init.js"></script>
  		<noscript>
  			<link rel="stylesheet" href="/css/skel.css" />
  			<link rel="stylesheet" href="/css/style.css" />
  			<link rel="stylesheet" href="/css/style-xlarge.css" />
  		</noscript>
  		<!--[if lte IE 8]><link rel="stylesheet" href="/css/ie/v8.css" /><![endif]-->
  	</head>

	<body id="top">

      <header id="header">
          <a href="/" class="image avatar"><img src="/images/avatar.jpg" alt="" /></a>
          <h1><strong>Stuart James'</strong> journal, a simple <br />
          little place for me to scribble down<br />
	  my thoughts and help my terrible memory<br /></h1>
	  <hr />
	  <h1>A little about me...</h1>
	  <h1>
		I'm a Computer Vision and Machine learning<br />
		researcher at <strong>UCL</strong>. Working in the VECG with<br /> 
		Tim Weyrich. Previously from <strong>University of Surrey</strong><br />  where I completed a Post-Doc and PhD studies.
	  </h1>
    <h4>
    <a href="http://stuart-james.com" >Read more about my research interests</a> 
    </h4>
    <hr />
      </header>


        <div id="main">
    <article>
        <header class="major">
            <h2 class="post-title">Map a point within a triangle from low dimensions to high</h2>
                <p class="post-meta">Apr 21, 2012</p>
        </header>

        <section>
            <p>The work I have been doing recently is to explore a mapping from a low dimensional space(10d) to a high dimensional space(160d). Although is not a particularly common problem is something that requires a little thinking. </p> <p>The obvious solution is to measure the distance, from the point to the three, triangle points. This of course is difficult to rationalise to a ratio that sums to 1.</p> <p><a href="http://stuartjames.info/Journal/Data/Sites/5/media/wlw/barycentric-basicmapping.jpg"><img style="display: block; float: none; margin-left: auto; margin-right: auto" title="Barycentric-BasicMapping" alt="Barycentric-BasicMapping" src="http://stuartjames.info/Data/Sites/5/media/wlw/barycentric-basicmapping_thumb.jpg" width="240" height="240"></a></p> <p>This problem becomes more obvious when a point lies on one of the points on the triangle. For example, this could result in a distance of [0, 50 50]. This distance means that if you project this using this information even if normalised, the point will not lie on the triangle coordinate in the higher dimensional space.</p> <p>To be able to map between two triangles accurately the best solution is to utilise Barycentric coordinates. This turns the 3 points of the triangle into three vertices. Using this information you are then able to solve to find the ratios to accurately map between the two spaces.</p> <p><a href="http://stuartjames.info/Journal/Data/Sites/5/media/wlw/barycentric-mapping.jpg"><img style="display: block; float: none; margin-left: auto; margin-right: auto" title="Barycentric-Mapping" alt="Barycentric-Mapping" src="http://stuartjames.info/Data/Sites/5/media/wlw/barycentric-mapping_thumb.jpg" width="240" height="240"></a></p> <p>Therefore to generate a new point in 2D, you have:</p> <p><img style="display: block; float: none; margin-left: auto; margin-right: auto" src="http://upload.wikimedia.org/wikipedia/en/math/b/e/4/be4c4d7ebd724d5d29a5c81c1275aaef.png"></p> <p>To get to this point we need to solve the equations for lambda, resulting in <em>n</em> equations for each of the different dimensions.</p> <p><img style="display: block; float: none; margin-left: auto; margin-right: auto" src="http://upload.wikimedia.org/wikipedia/en/math/8/6/a/86a453723463219aadced1f1f3abe946.png"></p> <p>This can be solved relatively easily using a linear solver.</p> <p>So now using this information it is easy to project the point from one triangle to the other. We have provided a Matlab solution to be able to easily map using two triangles.</p> <p> <div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:9D7513F9-C04C-4721-824A-2B34F0212519:bdb4f38e-3f78-4f8e-b373-deaa63837a01" class="wlWriterEditableSmartContent"><pre style=" width: 626px; height: 176px;background-color:White;overflow: auto;"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #008080;">1</span> <span style="color: #000000;">A </span><span style="color: #000000;">=</span><span style="color: #000000;"> [];
</span><span style="color: #008080;">2</span> <span style="color: #000000;">B </span><span style="color: #000000;">=</span><span style="color: #000000;"> [] ;
</span><span style="color: #008080;">3</span> <span style="color: #000000;"></span><span style="color: #0000FF;">for</span><span style="color: #000000;"> i</span><span style="color: #000000;">=</span><span style="color: #800080;">1</span><span style="color: #000000;">:size(ntA,</span><span style="color: #800080;">1</span><span style="color: #000000;">)
</span><span style="color: #008080;">4</span> <span style="color: #000000;">    line </span><span style="color: #000000;">=</span><span style="color: #000000;"> [(ntA(i,</span><span style="color: #800080;">1</span><span style="color: #000000;">) </span><span style="color: #000000;">-</span><span style="color: #000000;"> ntA(i,</span><span style="color: #800080;">3</span><span style="color: #000000;">)) (ntA(i,</span><span style="color: #800080;">2</span><span style="color: #000000;">) </span><span style="color: #000000;">-</span><span style="color: #000000;"> ntA(i,</span><span style="color: #800080;">3</span><span style="color: #000000;">)) ];
</span><span style="color: #008080;">5</span> <span style="color: #000000;">    B </span><span style="color: #000000;">=</span><span style="color: #000000;"> [ B ; (ntA(i,</span><span style="color: #800080;">3</span><span style="color: #000000;">) </span><span style="color: #000000;">-</span><span style="color: #000000;"> Qn(i)) ] ;
</span><span style="color: #008080;">6</span> <span style="color: #000000;">    A </span><span style="color: #000000;">=</span><span style="color: #000000;"> [A ; line];
</span><span style="color: #008080;">7</span> <span style="color: #000000;"></span><span style="color: #0000FF;">end</span><span style="color: #000000;">
</span><span style="color: #008080;">8</span> <span style="color: #000000;">Lambda </span><span style="color: #000000;">=</span><span style="color: #000000;"> linsolve(A,</span><span style="color: #000000;">-</span><span style="color: #000000;">B);</span></div></pre><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div></p>
<p>Therefore you can map the new point using</p>
<div style="padding-bottom: 0px; margin: 0px; padding-left: 0px; padding-right: 0px; display: inline; float: none; padding-top: 0px" id="scid:9D7513F9-C04C-4721-824A-2B34F0212519:32907cbb-f1e2-417a-be61-2dd87eca602e" class="wlWriterEditableSmartContent"><pre style=" width: 512px; height: 54px;background-color:White;overflow: auto;"><div><!--

Code highlighting produced by Actipro CodeHighlighter (freeware)
http://www.CodeHighlighter.com/

--><span style="color: #008080;">1</span> <span style="color: #000000;">Lambda = [Lambda ; ( 1 - Lambda(1) - Lambda(2) )];
</span><span style="color: #008080;">2</span> <span style="color: #000000;">
</span><span style="color: #008080;">3</span> <span style="color: #000000;">pB = sum(tB .*  repmat(Lambda',[],size(tB,1)),2);</span></div></pre><!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin.  http://dunnhq.com --></div>
<p>&nbsp;</p>
<p>You can view a complete version of this code, as well as a test case Files.</p>
<p>See: <a href="files.aspx">Files</a> –&gt;&nbsp; Barycentric Coordinates</p>
<p align="right"><em>Equations thanks to the ever wonderful <a href="http://en.wikipedia.org/wiki/Barycentric_coordinate_system_(mathematics)">Wikipedia</a></em></p><br /><a href='http://stuartjames.info/Journal/map-a-point-within-a-triangle-from-low-dimensions-to-high.aspx'>Stuart James</a>&nbsp;&nbsp;<a href='http://stuartjames.info/Journal/map-a-point-within-a-triangle-from-low-dimensions-to-high.aspx'>...</a>

        </section>
        
        <footer>
            <div class="row">
            
            
                <article class="6u 12u(small) excerpt">
                    <header>
                        <h2><a href="/2012/04/21/how-smart-phones-change.html">How smart phones change</a></h2>
                    </header>
                    <section>
                        <p><a href="http://stuartjames.info/Journal/Data/Sites/5/media/wlw/dsc_0435.jpg"><img style="display: inline" title="DSC_0435" alt="DSC_0435" src="http://stuartjames.info/Data/Sites/5/media/wlw/dsc_0435_thumb.jpg" width="640" height="425"></a></p> <p>Have just been routing through some old boxes, and discovered an Xda IIi, in fairness its not the oldest Xda I have owned. This is a nice comparison what I remember to be massive isn’t that big, the old Xda’s were just thick</p> <p><a href="http://stuartjames.info/Journal/Data/Sites/5/media/wlw/dsc_0440.jpg"><img style="display: inline" title="DSC_0440" alt="DSC_0440" src="http://stuartjames.info/Data/Sites/5/media/wlw/dsc_0440_thumb.jpg" width="640" height="425"></a></p><br /><a href='http://stuartjames.info/Journal/how-smart-phones-change.aspx'>Stuart James</a>&nbsp;&nbsp;<a href='http://stuartjames.info/Journal/how-smart-phones-change.aspx'>...</a>

                    </section>
                    <footer>
                        <ul class="actions">
                            <li><a href="/2012/04/21/how-smart-phones-change.html" class="button">Read More</a></li>
                        </ul>
                    </footer>
                </article>
            
            
            
            
                <article class="6u$ 12u(small) excerpt f-right">
                    <header>
                        <h2><a href="/2012/04/27/upgraded-video-player-with-skeleton-search.html">Upgraded Video player with skeleton search</a></h2>
                    </header>
                    <section>
                        <p><a href="http://stuartjames.info/Journal/Data/Sites/5/media/wlw/image.png"><img style="display: inline" title="image" alt="image" src="http://stuartjames.info/Data/Sites/5/media/wlw/image_thumb.png" width="640" height="307" /></a></p>
<p>At the moment I am doing some work in relation to pose search. In the process for doing this I created a skeleton search tool. I also improved the video player I mentioned earlier making it a nice sleek grey player. The skeleton tool still has some work to be done on it, to make it a fully interactive search. As stated in previous posts, I have really got into abusing the Bootstrap theme (by Twitter).</p>
<p><br /><a href="http://stuartjames.info/Journal/upgraded-video-player-with-skeleton-search.aspx">Stuart James</a>  <a href="http://stuartjames.info/Journal/upgraded-video-player-with-skeleton-search.aspx">…</a></p>

                    </section>
                    <footer>
                        <ul class="actions">
                            <li><a href="/2012/04/27/upgraded-video-player-with-skeleton-search.html" class="button">Read More</a></li>
                        </ul>
                    </footer>
                </article>
            
            </div>
        </footer>

    </article>

</div>


        <!-- Footer -->
        <footer id="footer">
            <ul class="icons">

              
              <li>
                <a href="https://github.com/sttu" class="icon fa-github">
                  <span class="label">GitHub</span>
                </a>
              </li>
              

              
              <li>
                <a href="https://twitter.com/sttujames" class="icon fa-twitter">
                  <span class="label">Twitter</span>
                </a>
              </li>
              

              
              <li>
                <a href="https://linkedin.com/in/stuartajames" class="icon fa-linkedin">
                  <span class="label">LinkedIn</span>
                </a>
              </li>
              

              
              <li>
                <a href="https://plus.google.com/stuartjames" class="icon fa-google-plus">
                  <span class="label">Google+</span>
                </a>
              </li>
              

              
              <li>
                <a href="https://www.facebook.com/stuartaaronjames" class="icon fa-facebook">
                  <span class="label">Facebook</span>
                </a>
              </li>
              

              

              
              <li>
                <a href="mailto:contact@stuart-james.com" class="icon fa-envelope-o">
                  <span class="label">Email</span>
                </a>
              </li>
              
            </ul>
            <ul class="copyright">
                <li>&copy; Stuart James 2016</li>
                <li>Design: <a href="http://html5up.net">HTML5 UP</a></li>
                <li>Demo Images: <a href="https://unsplash.com/">Unsplash</a></li>
                <li>Jekyll Template: <a href="http://cloudcannon.com">Cloud Cannon</a></li>
            </ul>
        </footer>

	</body>
</html>
